[tox]
skipsdist = true
envlist =
    lint
    test

[pytest]
testpaths =
    tests

[testenv:lint]
setenv =
    CRUIZ_GENERATE_RESOURCES_ONLY = 1
deps =
    -r{toxinidir}/requirements_dev.txt
    -r{toxinidir}/requirements.txt
commands =
    pip install -e .
    python -m cruiz
    flake8 src/cruiz
    flake8 tests
    mypy --install-types --non-interactive src/cruiz
    mypy --install-types --non-interactive tests

[testenv:test]
deps =
    -r{toxinidir}/requirements_dev.txt
    -r{toxinidir}/requirements.txt
commands =
    pip install -e .
    pytest
